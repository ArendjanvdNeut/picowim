<html>
<head>
<meta charset="UTF-8">
<link rel="stylesheet" type="text/css" href="../style.css">
<script>

var page=""
function initEdit(){
	if (window.location.href.indexOf("page=")>0){
		page=window.location.href.split("page=")[1]
		txt = loadXMLDoc( page+".html" ) 
		if (txt){
			document.getElementById('pagecontent').innerHTML=txt
		}
	}
}

function loadXMLDoc( url){
	var xmlhttp, async=false
	var result, respons;
	if (window.XMLHttpRequest) // code for IE7+, Firefox, Chrome, Opera, Safari
	  { xmlhttp=new XMLHttpRequest() }
	else // code for IE6, IE5
	  { xmlhttp=new ActiveXObject("Microsoft.XMLHTTP") }
	xmlhttp.open("GET",url,async);
	xmlhttp.send()
	return xmlhttp.responseText 
}

function savepage(){
	if (page){
		content=document.getElementById('pagecontent').innerHTML=txt
		loadXMLDoc( 'rwf.asp?file='+page+'.html&request=w&content='+escape( content ) )
	}
}

</script>
<style>
body{width:100%}
#pagecontent {position:absolute;top:50px;bottom:50px;width:100%;overflow-y:auto;padding:10px}
#savepage {position:absolute;bottom:10px;font-size:25px}
</style>
</head>
<body onload='initEdit()'>
<h1>Edit pagina</h1>
<textarea id='pagecontent'></textarea>
<input id='savepage' type=button value=save onclick="savepage()">
</body>
</html>

